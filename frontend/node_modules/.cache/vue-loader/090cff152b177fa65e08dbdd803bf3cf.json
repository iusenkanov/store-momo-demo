{"remainingRequest":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/src/views/Catalog.vue?vue&type=style&index=0&id=0ac8ae8f&scoped=true&lang=css","dependencies":[{"path":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/src/views/Catalog.vue","mtime":1743553674182},{"path":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/node_modules/css-loader/dist/cjs.js","mtime":1743553672602},{"path":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1743553674015},{"path":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/node_modules/postcss-loader/src/index.js","mtime":1743553673363},{"path":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1743553672078},{"path":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1743553674014}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgLnNwaW5uZXItd3JhcHBlciB7CiAgICB3aWR0aDogMTAwJTsKICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICB9CgogIC5zcGlubmVyLWJvcmRlciB7CiAgICB3aWR0aDogOHJlbTsKICAgIGhlaWdodDogOHJlbTsKICAgIGZvbnQtc2l6ZTogMS41cmVtOwogIH0K"},{"version":3,"sources":["/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/src/views/Catalog.vue"],"names":[],"mappings":";EAkHE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpB;;EAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACd,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnB","file":"/Users/iskenderusenkanov/Kubernetes/store-momo-demo/frontend/src/views/Catalog.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"container d-flex flex-column h-100\">\n    <div class=\"row\">\n      <div class=\"col-12 col-lg-9\">\n        <h1 class=\"text-center mb-3\">Каталог</h1>\n      </div>\n    </div>\n    <div class=\"row flex-fill\">\n\n      <div class=\"col-12 col-lg-9\">\n        <div class=\"d-flex flex-column h-100\">\n\n          <div class=\"flex-fill\">\n\n            <div v-if=\"loading\" class=\"d-flex align-items-center justify-content-center h-100\" >\n              <div class=\"spinner-wrapper\">\n                <div class=\"spinner-border\" role=\"status\">\n                  <span class=\"visually-hidden\">Загрузка...</span>\n                </div>\n              </div>\n            </div>\n\n            <Products v-else :products=\"products\"  />\n\n          </div>\n\n          <div>\n            <Pagination :products=\"products\" @pageChange=\"fetchProducts\" />\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col-12 col-lg-3 my-3 my-lg-0\">\n        <Search @search=\"handleSearch\" :query=\"search_query\"/>\n        <br />\n        <CartCard />\n        <br />\n        <Filters @change=\"handleFiltersChange\"/>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\nimport Products from \"@/components/catalog/Products.vue\";\nimport Pagination from \"@/components/catalog/Pagination.vue\";\nimport Search from \"@/components/catalog/Search.vue\";\nimport CartCard from \"@/components/catalog/CartCard.vue\";\nimport Filters from \"@/components/catalog/Filters.vue\";\n\nimport ProductsService from \"@/services/resources/products.service\";\nimport ProductModel from \"@/models/product.model\";\nimport PaginationModel from \"@/models/pagination.model\";\n\nconst productsService = new ProductsService();\n\nconst PAGE_SIZE = 12;\n\nexport default defineComponent({\n  name: \"Catalog\",\n  components: {\n    Products,\n    Pagination,\n    Search,\n    CartCard,\n    Filters,\n  },\n  data() {\n    const products = PaginationModel.empty(ProductModel);\n    const categories_filter: number[] = [];\n    return {\n      products,\n      categories_filter,\n      search_query: \"\",\n      loading: true,\n    };\n  },\n  created() {\n    this.fetchProducts();\n  },\n  methods: {\n    fetchProducts(page?: number) {\n      page = page || this.products.current_page;\n      this.loading = true;\n      return productsService\n        .query({\n          page,\n          size: PAGE_SIZE,\n          categories: this.categories_filter,\n          search: this.search_query || undefined,\n        })\n        .then((products) => {\n          this.products = products;\n          this.loading = false;\n        });\n    },\n    handleSearch(query: string) {\n      this.search_query = query;\n      this.products.current_page = 1;\n      this.fetchProducts();\n    },\n    handleFiltersChange(categories: number[]) {\n      this.categories_filter = categories;\n      this.products.current_page = 1;\n      this.fetchProducts();\n    },\n  },\n});\n</script>\n\n<style scoped>\n  .spinner-wrapper {\n    width: 100%;\n    text-align: center;\n  }\n\n  .spinner-border {\n    width: 8rem;\n    height: 8rem;\n    font-size: 1.5rem;\n  }\n</style>"]}]}