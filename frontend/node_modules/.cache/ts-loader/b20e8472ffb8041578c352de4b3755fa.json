{"remainingRequest":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/thread-loader/dist/cjs.js!/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/babel-loader/lib/index.js!/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/ts-loader/index.js??ref--14-3!/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/src/services/api.service.ts","dependencies":[{"path":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/src/services/api.service.ts","mtime":1743484457793},{"path":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/babel.config.js","mtime":1743484457788},{"path":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1743485460826},{"path":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1743485460826},{"path":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/babel-loader/lib/index.js","mtime":1743485462509},{"path":"/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/node_modules/ts-loader/index.js","mtime":1743485460995}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgcGFyc2UgfSBmcm9tICdjb29raWUnOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMOwpjbGFzcyBBcGlTZXJ2aWNlIHsKICBzdGF0aWMgYXN5bmMgZ2V0Q3NyZlRva2VuKGZldGNoID0gdHJ1ZSkgewogICAgY29uc3QgY29va2llcyA9IHBhcnNlKGRvY3VtZW50LmNvb2tpZSk7CiAgICBpZiAoY29va2llc1snbW9ja19zdG9yZV9jc3JmdG9rZW4nXSkgewogICAgICByZXR1cm4gY29va2llc1snbW9ja19zdG9yZV9jc3JmdG9rZW4nXTsKICAgIH0KICAgIGlmICghZmV0Y2gpIHJldHVybiBQcm9taXNlLnJlamVjdCgnTm8gQ1NSRiB0b2tlbiBmb3VuZCcpOwogICAgYXdhaXQgdGhpcy5nZXQoJy9jc3JmLycpOwogICAgcmV0dXJuIHRoaXMuZ2V0Q3NyZlRva2VuKGZhbHNlKTsKICB9CiAgc3RhdGljIGFzeW5jIGdldEhlYWRlcnMoZXh0cmEgPSB7fSkgewogICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oewogICAgICAnWC1DU1JGVE9LRU4nOiBhd2FpdCB0aGlzLmdldENzcmZUb2tlbigpCiAgICB9LCBleHRyYSk7CiAgfQogIHN0YXRpYyBnZXQodXJsLCBwYXJhbXMpIHsKICAgIHJldHVybiBheGlvcy5nZXQodXJsLCB7CiAgICAgIHBhcmFtcwogICAgfSkudGhlbihyID0+IHIuZGF0YSk7CiAgfQogIHN0YXRpYyBhc3luYyBwb3N0KHVybCwgZGF0YSkgewogICAgcmV0dXJuIGF4aW9zLnBvc3QodXJsLCBkYXRhLCB7CiAgICAgIGhlYWRlcnM6IGF3YWl0IHRoaXMuZ2V0SGVhZGVycygpCiAgICB9KS50aGVuKHIgPT4gci5kYXRhKTsKICB9CiAgc3RhdGljIGFzeW5jIHB1dCh1cmwsIGRhdGEpIHsKICAgIHJldHVybiBheGlvcy5wdXQodXJsLCBkYXRhLCB7CiAgICAgIGhlYWRlcnM6IGF3YWl0IHRoaXMuZ2V0SGVhZGVycygpCiAgICB9KS50aGVuKHIgPT4gci5kYXRhKTsKICB9CiAgc3RhdGljIGFzeW5jIGRlbGV0ZSh1cmwsIGRhdGEpIHsKICAgIHJldHVybiBheGlvcy5kZWxldGUodXJsLCB7CiAgICAgIGhlYWRlcnM6IGF3YWl0IHRoaXMuZ2V0SGVhZGVycygpLAogICAgICBkYXRhCiAgICB9KS50aGVuKHIgPT4gci5kYXRhKTsKICB9Cn0KZXhwb3J0IGRlZmF1bHQgQXBpU2VydmljZTs="},{"version":3,"names":["axios","parse","defaults","baseURL","process","env","VUE_APP_API_URL","ApiService","getCsrfToken","fetch","cookies","document","cookie","Promise","reject","get","getHeaders","extra","Object","assign","url","params","then","r","data","post","headers","put","delete"],"sources":["/Users/iskenderusenkanov/Kubernetes/momo-store-demo/frontend/src/services/api.service.ts"],"sourcesContent":["import axios, { AxiosRequestHeaders } from 'axios';\nimport { parse } from 'cookie';\n\naxios.defaults.baseURL = process.env.VUE_APP_API_URL;\nclass ApiService {\n\n  static csrf_token: string;\n\n  static async getCsrfToken(fetch = true): Promise<string> {\n    const cookies = parse(document.cookie);\n\n    if(cookies['mock_store_csrftoken']) {\n      return cookies['mock_store_csrftoken'];\n    }\n\n    if(!fetch) return Promise.reject('No CSRF token found');\n\n    await this.get('/csrf/');\n\n    return this.getCsrfToken(false);\n  }\n\n  static async getHeaders(extra: {[name: string]: string} = {}): Promise<AxiosRequestHeaders> {\n    return Object.assign({\n      'X-CSRFTOKEN': await this.getCsrfToken(),\n    }, extra);\n  }\n\n  static get(url: string, params?: any) {\n    return axios.get(url, { params }).then(r => r.data);\n  }\n\n  static async post(url: string, data?: any) {\n    return axios.post(url, data, { headers: await this.getHeaders() }).then(r => r.data);\n  }\n\n  static async put(url: string, data?: any) {\n    return axios.put(url, data, { headers: await this.getHeaders() }).then(r => r.data);\n  }\n\n  static async delete(url: string, data?: any) {\n    return axios.delete(url, { headers: await this.getHeaders(), data }).then(r => r.data);\n  }\n}\n\nexport default ApiService;"],"mappings":"AAAA,OAAOA,KAA8B,MAAM,OAAO;AAClD,SAASC,KAAK,QAAQ,QAAQ;AAE9BD,KAAK,CAACE,QAAQ,CAACC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,eAAe;AACpD,MAAMC,UAAU;EAId,aAAaC,YAAYA,CAACC,KAAK,GAAG,IAAI;IACpC,MAAMC,OAAO,GAAGT,KAAK,CAACU,QAAQ,CAACC,MAAM,CAAC;IAEtC,IAAGF,OAAO,CAAC,sBAAsB,CAAC,EAAE;MAClC,OAAOA,OAAO,CAAC,sBAAsB,CAAC;;IAGxC,IAAG,CAACD,KAAK,EAAE,OAAOI,OAAO,CAACC,MAAM,CAAC,qBAAqB,CAAC;IAEvD,MAAM,IAAI,CAACC,GAAG,CAAC,QAAQ,CAAC;IAExB,OAAO,IAAI,CAACP,YAAY,CAAC,KAAK,CAAC;EACjC;EAEA,aAAaQ,UAAUA,CAACC,KAAA,GAAkC,EAAE;IAC1D,OAAOC,MAAM,CAACC,MAAM,CAAC;MACnB,aAAa,EAAE,MAAM,IAAI,CAACX,YAAY;KACvC,EAAES,KAAK,CAAC;EACX;EAEA,OAAOF,GAAGA,CAACK,GAAW,EAAEC,MAAY;IAClC,OAAOrB,KAAK,CAACe,GAAG,CAACK,GAAG,EAAE;MAAEC;IAAM,CAAE,CAAC,CAACC,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;EACrD;EAEA,aAAaC,IAAIA,CAACL,GAAW,EAAEI,IAAU;IACvC,OAAOxB,KAAK,CAACyB,IAAI,CAACL,GAAG,EAAEI,IAAI,EAAE;MAAEE,OAAO,EAAE,MAAM,IAAI,CAACV,UAAU;IAAE,CAAE,CAAC,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;EACtF;EAEA,aAAaG,GAAGA,CAACP,GAAW,EAAEI,IAAU;IACtC,OAAOxB,KAAK,CAAC2B,GAAG,CAACP,GAAG,EAAEI,IAAI,EAAE;MAAEE,OAAO,EAAE,MAAM,IAAI,CAACV,UAAU;IAAE,CAAE,CAAC,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;EACrF;EAEA,aAAaI,MAAMA,CAACR,GAAW,EAAEI,IAAU;IACzC,OAAOxB,KAAK,CAAC4B,MAAM,CAACR,GAAG,EAAE;MAAEM,OAAO,EAAE,MAAM,IAAI,CAACV,UAAU,EAAE;MAAEQ;IAAI,CAAE,CAAC,CAACF,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC;EACxF;;AAGF,eAAejB,UAAU","ignoreList":[]}]}